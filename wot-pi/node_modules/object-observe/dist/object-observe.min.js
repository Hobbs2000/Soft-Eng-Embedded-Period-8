!function(a,b){if("object"==typeof exports)module.exports=b(require("lodash"),require,exports,module);else if("function"==typeof define&&define.amd)define(["lodash","require","exports","module"],b);else{var c=function(b){return a[b]},d=a,e={exports:d};b(_,c,d,e)}}(this,function(a,b,c,d){function e(a,b,c){if("object"!=typeof a)throw new TypeError("Object.observeObject called on non-object");if(f(b)===!1)throw new TypeError("Object.observeObject: Expecting function");if(Object.isFrozen(b)===!0)throw new TypeError("Object.observeObject: Expecting unfrozen function");if(void 0!==c&&!Array.isArray(c))throw new TypeError("Object.observeObject: Expecting acceptList in the form of an array")}"undefined"==typeof WeakMap&&!function(){var a=Object.defineProperty,b=Date.now()%1e9,c=function(){this.name="__st"+(1e9*Math.random()>>>0)+(b++ +"__")};c.prototype={set:function(b,c){var d=b[this.name];return d&&d[0]===b?d[1]=c:a(b,this.name,{value:[b,c],writable:!0}),this},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:void 0},"delete":function(a){var b=a[this.name];if(!b)return!1;var c=b[0]===a;return b[0]=b[1]=void 0,c},has:function(a){var b=a[this.name];return b?b[0]===a:!1}},"undefined"!=typeof window&&(window.WeakMap=c),"undefined"!=typeof global&&(global.WeakMap=c)}();var f=function(a){var b=a.call(a),c=typeof c;return"object"==typeof this.alert?function(d){return b===a.call(d)||!!d&&typeof d.toString==c&&typeof d.valueOf==c&&/^\s*\bfunction\b/.test(""+d)}:function(c){return b===a.call(c)}}(Object.prototype.toString);return Object.observe||!function(b){function c(a){this.o=a}function d(b,c,d){p(),a.times(t.length,x),c.apply(d),a.forEach(t,n),o()}function f(b){var c;c=u.get(b.object),a.forEach(c,function(a){-1!==a.accept.indexOf(b.type)&&a.notify.push(b)})}function g(a,b,c){k(a,b),h(a,b,c),l(a),m(a),o()}function h(b,c,d){e(b,c,d),d=a.isUndefined(d)?["add","update","delete","reconfigure","setPrototype","preventExtensions"]:d;var f=u.get(b);f.push({callback:c,accept:d,notify:[]})}function i(a,b){if(e(a,b),-1!==t.indexOf(a)){var c,d=u.get(a),f=d.length;for(c=0;f>c;c++)b===d[c].callback&&(d.splice(c,2),f--);0===f&&j(a)}}function j(b){-1!==t.indexOf(b)&&(u.delete(b),v.delete(b),w.delete(b),a.pull(t,b))}function k(a){-1===t.indexOf(a)&&(u.set(a,[]),v.set(a,{}),w.set(a,[]),t.push(a))}function l(b){var c={};a.forIn(b,function(a,b){c[b]=a}),v.set(b,c)}function m(b){w.set(b,a.keys(b))}function n(b){w.set(b,a.keys(b)),l(b)}function o(){-1===y&&(y=setInterval(x,1))}function p(){-1!==y&&(clearInterval(y),y=-1)}function q(b){if(!a.isFunction(b))throw new TypeError;p(),a.times(t.length,x);var c;a.forEach(t,function(d){c=u.get(d),a.forEach(c,function(a){0!==a.notify.length&&a.callback==b&&(a.callback(a.notify),a.notify=[])})}),o()}function r(){var b;a.forEach(t,function(c){b=u.get(c),a.forEach(b,function(a){0!==a.notify.length&&(a.callback.call(void 0,a.notify),a.notify=[])})}),b=null}function s(a){return new c(a)}var t=[],u=new WeakMap,v=new WeakMap,w=new WeakMap;c.prototype.performChange=d,c.prototype.notify=f;var x=function(){function b(){c()&&(e(),f(),g(),h(),n(y),d()&&(z=-1,r()))}function c(){return 0===t.length?(p(),!1):!0}function d(){return z+1>=x}function e(){x=t.length,z++,y=t[z],i=s(y),k=a.keys(y),j=w.get(y),l=v.get(y),m=a.difference(j,k),o=a.difference(k,j),q=a.difference(j,m),u=[],a.forEach(q,function(a){l[a]!==y[a]&&u.push(a)})}function f(){a.forEach(u,function(a){i.notify({name:a,object:y,type:"update",oldValue:l[a]})})}function g(){a.forEach(o,function(a){i.notify({name:a,object:y,type:"add"})})}function h(){a.forEach(m,function(a){i.notify({name:a,object:y,type:"delete",oldValue:l[a]})})}var i,j,k,l,m,o,q,u,x,y,z=-1;return b}(),y=-1;b.observe=g,b.unobserve=i,b.deliverChangeRecords=q,b.getNotifier=s}(Object,this),d.exports});
//# sourceMappingURL=object-observe.min.js.map